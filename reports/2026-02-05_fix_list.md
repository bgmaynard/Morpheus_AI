# Fix List - 2026-02-05

## 1. Worklist Purge Issue

**Problem:** Daily reset at 4:15 AM ET did not purge old symbols from pipeline. Had to manually:
1. Delete `data/persistent_watchlist.json`
2. Restart server

**Expected:** At 4:15 AM ET, all symbols should be cleared automatically for fresh daily start.

**Files to check:**
- `morpheus/server/main.py` - `_daily_reset_loop()` and `_purge_watchlist_for_new_day()`
- `data/persistent_watchlist.json` - should be deleted on purge

**Fix needed:** Ensure daily purge clears:
- Pipeline active symbols
- Persistent watchlist file
- Streaming subscriptions

## 2. MAX_AI Auto-Inject Not Working

**Problem:** After daily purge, MAX_AI should auto-inject top gainers into Morpheus pipeline. Currently shows `injected_count: 0` despite 107 gainers available.

**Expected workflow:**
1. 4:15 AM daily purge clears symbols
2. MAX_AI auto-inject pushes top gainers to Morpheus
3. Morpheus filters based on criteria
4. Qualifying symbols added to worklist

**Endpoints:**
- MAX_AI: `/morpheus/auto-inject/status` - shows enabled but 0 injected
- MAX_AI: `/finviz/top-gainers` - has 107 gainers
- Morpheus: `/api/scanner/force-add/{symbol}` - manual injection works

**Fix needed:** Debug why auto-inject loop isn't pushing to Morpheus after server restart

## 3. Schwab Stock Status Flags (Upgrade)

**Feature:** Pull stock status flags from Schwab API for pre-entry validation.

| Flag | Impact |
|------|--------|
| ETB  | Clear to trade |
| HTB  | Hard to borrow (warning) |
| SSR  | Exit trap on drops - BLOCK blacklist entries |
| HALT | No trading |

**Build needed:**
1. `stock_status_checker.py` - pull flags from Schwab API
2. Pre-entry validation check in risk gate
3. Dashboard indicator in UI

**Integration points:**
- Risk gate should check status before order submission
- SSR symbols should be blacklisted (can't short, exit trap risk)
- HALT should block all trading
- UI should show status badge on worklist/positions
